# TUI 기능 명세서

## 개요

Open-Scribe TUI는 YouTube 전사 작업을 시각적이고 직관적으로 관리할 수 있는 터미널 사용자 인터페이스입니다. 복잡한 명령줄 옵션 대신 메뉴와 폼을 통해 쉽게 작업할 수 있습니다.

## 주요 화면별 기능

### 1. 메인 메뉴 화면

#### 기능 개요
- 애플리케이션의 중앙 허브 역할
- 모든 주요 기능에 빠른 접근 제공
- 직관적인 메뉴 구조

#### 화면 구성
```
┌─────────────────────────────────────────┐
│         🎥 Open-Scribe TUI v2.0         │
│           YouTube 전사 도구              │
├─────────────────────────────────────────┤
│                                         │
│  [1] 🎬 새 전사 작업                    │
│  [2] 📊 데이터베이스 관리               │
│  [3] 🔑 API 키 관리                     │
│  [4] ⚙️  설정                           │
│  [5] 📈 실시간 모니터링                 │
│  [6] ❓ 도움말                          │
│  [7] 🚪 종료                            │
│                                         │
└─────────────────────────────────────────┘
```

#### 상호작용
- **마우스**: 버튼 클릭으로 메뉴 선택
- **키보드**: 숫자 키(1-7) 또는 Tab + Enter
- **단축키**: 
  - `Ctrl+C`: 종료
  - `F1`: 도움말
  - `F2`: 테마 변경

### 2. 새 전사 작업 화면

#### 기능 개요
- 새로운 YouTube 비디오 전사 작업 생성
- 다양한 전사 엔진 선택 옵션
- 실시간 진행률 모니터링
- 로그 스트리밍

#### 주요 기능

##### 2.1 URL 입력 및 검증
- **기능**: YouTube URL 입력 및 자동 검증
- **지원 형식**:
  - `https://www.youtube.com/watch?v=VIDEO_ID`
  - `https://youtu.be/VIDEO_ID`
  - `https://www.youtube.com/playlist?list=PLAYLIST_ID`
- **검증**: 실시간 URL 형식 검증 및 오류 표시

##### 2.2 전사 엔진 선택
- **GPT-4o-transcribe**: 최고품질, 느린 속도, 높은 비용
- **GPT-4o-mini-transcribe**: 중간품질, 빠른 속도, 낮은 비용 (기본값)
- **Whisper API**: 중간품질, 중간 속도
- **Whisper.cpp**: 로컬 처리, 빠른 속도, 무료
- **YouTube Transcript API**: 가장 빠름, 무료, 품질 제한적

##### 2.3 옵션 설정
- ☑️ **요약 생성**: AI 기반 한국어 요약 생성
- ☐ **상세 요약**: 시간대별 상세 분석 포함
- ☐ **한국어 번역**: 비한국어 콘텐츠 자동 번역
- ☐ **SRT 자막 생성**: 타임코드 포함 자막 파일
- ☐ **비디오 다운로드**: 원본 비디오 파일 저장
- ☐ **오디오 보관**: MP3 오디오 파일 유지
- ☑️ **타임스탬프 포함**: 전사 텍스트에 시간 정보
- ☑️ **실시간 스트리밍**: 진행 상황 실시간 출력

##### 2.4 실시간 진행률 표시
```
┌─────────────────────────────────────────┐
│ 📥 다운로드 중... [████████████░░░] 85% │
│ ⏱️  예상 시간: 2분 30초 남음             │
│ 📊 속도: 1.2MB/s                        │
└─────────────────────────────────────────┘
```

##### 2.5 로그 스트리밍
```
┌─ 작업 로그 ──────────────────────────────┐
│ [14:32:15] 🚀 전사 작업 시작             │
│ [14:32:16] 📺 비디오 정보 수집 중...      │
│ [14:32:18] ✅ 제목: "AI 기술의 미래"     │
│ [14:32:18] 📥 오디오 다운로드 시작...    │
│ [14:32:45] 🎯 전사 엔진 초기화...        │
│ [14:33:02] 📝 전사 진행중 (23%)...       │
└─────────────────────────────────────────┘
```

#### 사용자 시나리오

##### 시나리오 1: 기본 전사 작업
1. URL 입력: `https://youtu.be/dQw4w9WgXcQ`
2. 엔진 선택: GPT-4o-mini-transcribe (기본값)
3. 옵션: 요약 생성, 실시간 스트리밍 활성화
4. "🚀 전사 시작" 버튼 클릭
5. 실시간 진행률 및 로그 모니터링
6. 완료 시 결과 파일 경로 확인

##### 시나리오 2: 고품질 전사 + 번역
1. URL 입력 및 검증
2. 엔진 선택: GPT-4o-transcribe
3. 옵션: 요약, 상세 요약, 번역, SRT 생성 모두 활성화
4. 전사 실행 및 각 단계별 진행 상황 확인
5. 완료된 파일들 (.txt, .srt, 요약.txt) 확인

### 3. 데이터베이스 관리 화면

#### 기능 개요
- 모든 전사 작업 히스토리 조회
- 고급 검색 및 필터링
- 통계 분석 및 시각화
- 일괄 관리 작업

#### 탭 구성

##### 3.1 히스토리 탭

###### 검색 및 필터링
```
┌─ 검색 ──────────────────────────────────┐
│ [검색어 입력...        ] [🔍 검색]      │
│ [🔄 새로고침] [📤 내보내기]             │
├─────────────────────────────────────────┤
│ [전체] [성공] [실패] [진행중]           │
└─────────────────────────────────────────┘
```

- **텍스트 검색**: 제목, URL, 요약 내용 전체 검색
- **상태 필터**: 전체/성공/실패/진행중
- **엔진 필터**: 사용된 전사 엔진별 필터링
- **날짜 범위**: 작업 생성일/완료일 기간 설정

###### 결과 테이블
| ID | 제목 | URL | 엔진 | 상태 | 생성일 | 완료일 | 크기 |
|----|------|-----|------|------|--------|--------|------|
| 1 | AI 기술의 미래 | youtu.be/abc123 | gpt-4o-mini | 완료 | 2025-01-15 | 2025-01-15 | 2.3MB |
| 2 | Python 강의 1강 | youtu.be/def456 | whisper-api | 실패 | 2025-01-14 | - | - |

###### 상호작용
- **정렬**: 컬럼 헤더 클릭으로 정렬
- **상세 보기**: 행 더블클릭으로 상세 정보
- **컨텍스트 메뉴**: 우클릭으로 재전사/삭제/내보내기
- **다중 선택**: Ctrl+클릭으로 여러 항목 선택

##### 3.2 통계 탭

###### 종합 통계
```
┌─ 전체 통계 ──────────────────────────────┐
│ 📊 총 작업 수: 156개                     │
│ ✅ 성공률: 89.7% (140/156)              │
│ ⏱️  평균 처리 시간: 4분 23초             │
│ 💾 총 저장 용량: 2.3GB                  │
└─────────────────────────────────────────┘
```

###### 엔진별 통계
```
┌─ 엔진별 사용 현황 ───────────────────────┐
│ GPT-4o-mini:     85회 (54.5%) ████████  │
│ YouTube API:     32회 (20.5%) ███       │
│ Whisper API:     23회 (14.7%) ██        │
│ GPT-4o:          16회 (10.3%) █         │
└─────────────────────────────────────────┘
```

###### 시간대별 분석
- 시간별/일별/월별 작업 빈도 차트
- 성공률 추이 그래프
- 처리 시간 분포 히스토그램

##### 3.3 관리 탭

###### 일괄 작업
- **오래된 작업 정리**: 30일 이상 된 실패/임시 파일 삭제
- **데이터베이스 최적화**: SQLite VACUUM 및 인덱스 재구성
- **스키마 업그레이드**: 데이터베이스 구조 업데이트
- **백업 생성**: 전체 데이터베이스 백업 파일 생성

###### 내보내기 옵션
- **CSV 형식**: Excel에서 열기 가능한 스프레드시트
- **JSON 형식**: 프로그래밍 친화적 구조화 데이터
- **텍스트 보고서**: 읽기 쉬운 요약 보고서

### 4. API 키 관리 화면

#### 기능 개요
- OpenAI API 키 안전한 관리
- 키 유효성 자동 검증
- 환경 변수 자동 업데이트

#### 주요 기능

##### 4.1 키 목록 관리

###### 키 목록 테이블
| 이름 | 키 (마스킹) | 상태 | 마지막 검증 | 액션 |
|------|-------------|------|-------------|------|
| OpenAI Main | sk-proj...Ab12 | ✅ 유효 | 2025-01-15 14:30 | [수정] [삭제] |
| OpenAI Backup | sk-proj...Cd34 | ❌ 만료 | 2025-01-10 09:15 | [수정] [삭제] |

- **보안 마스킹**: `sk-proj-1234...890ABC` 형태로 표시
- **상태 표시**: 유효/만료/미검증/오류
- **자동 검증**: 정기적 유효성 확인

##### 4.2 키 추가/편집

###### 키 정보 입력 폼
```
┌─ API 키 정보 ────────────────────────────┐
│ 키 이름: [OpenAI API Key            ]   │
│ API 키:  [sk-proj-••••••••••••••••••]   │
│                                         │
│ [💾 저장] [✅ 검증] [❌ 취소]           │
└─────────────────────────────────────────┘
```

- **이름 검증**: 중복 이름 방지
- **키 형식 검증**: OpenAI API 키 형식 확인
- **실시간 검증**: 입력 즉시 유효성 확인

##### 4.3 자동 환경 변수 관리
- `.env` 파일 자동 생성/업데이트
- 백업 파일 자동 생성
- 변경 사항 로그 기록

#### 보안 기능
- 메모리 내 키 암호화
- 로그 파일에 민감 정보 제외
- 임시 파일 보안 권한 설정

### 5. 설정 관리 화면

#### 기능 개요
- 애플리케이션 전역 설정
- 환경 변수 시각적 편집
- 기본값 관리

#### 설정 카테고리

##### 5.1 기본 설정
```
┌─ 기본 전사 설정 ─────────────────────────┐
│ 기본 엔진:     [GPT-4o-mini-transcribe▼]│
│ 실시간 출력:   ☑️ 활성화                │
│ 다운로드 저장: ☑️ Downloads 폴더 복사   │
│ 자동 요약:     ☑️ 항상 생성             │
│ 상세 요약:     ☐ 기본적으로 비활성화     │
└─────────────────────────────────────────┘
```

##### 5.2 경로 설정
```
┌─ 저장 경로 설정 ─────────────────────────┐
│ 기본 경로:    [~/Documents/open-scribe ] │
│ 오디오 경로:  [~/Documents/.../audio  ] │
│ 전사 경로:    [~/Documents/.../transcript]│
│ 비디오 경로:  [~/Documents/.../video  ] │
│ 데이터베이스: [~/Documents/.../db     ] │
└─────────────────────────────────────────┘
```

##### 5.3 성능 설정
```
┌─ 성능 및 리소스 ─────────────────────────┐
│ 최소 워커 수: [1    ] 개                │
│ 최대 워커 수: [5    ] 개                │
│ 메모리 제한:  [2048 ] MB                │
│ 임시 파일:    ☑️ 자동 정리 (24시간 후)  │
└─────────────────────────────────────────┘
```

##### 5.4 UI 설정
```
┌─ 인터페이스 설정 ────────────────────────┐
│ 테마:         [다크 모드           ▼]   │
│ 언어:         [한국어              ▼]   │
│ 애니메이션:   ☑️ 활성화                 │
│ 소리 알림:    ☐ 작업 완료 시 알림       │
└─────────────────────────────────────────┘
```

#### 설정 관리 기능
- **프로필 저장**: 설정 조합을 프로필로 저장
- **초기화**: 공장 기본값으로 복원
- **가져오기/내보내기**: 설정 파일 백업/복원
- **실시간 적용**: 재시작 없이 설정 적용

### 6. 실시간 모니터링 화면

#### 기능 개요
- 현재 실행 중인 작업 모니터링
- 시스템 리소스 상태 표시
- 성능 메트릭 실시간 업데이트

#### 모니터링 패널

##### 6.1 현재 작업 상태
```
┌─ 진행 중인 작업 ─────────────────────────┐
│ 📺 "Python 기초 강의 1강"               │
│ 🔧 엔진: GPT-4o-mini-transcribe         │
│ 📊 진행률: [████████░░] 78% (3분 12초)  │
│ ⬇️  다운로드: 완료 (23.4MB)             │
│ 🎯 전사: 진행중 (78%)                   │
│ 📝 후처리: 대기중                       │
└─────────────────────────────────────────┘
```

##### 6.2 시스템 리소스
```
┌─ 시스템 상태 ───────────────────────────┐
│ 💻 CPU: [██████░░░░] 64%               │
│ 💾 메모리: [████░░░░░░] 38% (3.2/8GB)  │
│ 💽 디스크: [██░░░░░░░░] 23% (45/200GB) │
│ 🌐 네트워크: ⬆️ 1.2MB/s ⬇️ 3.4MB/s    │
└─────────────────────────────────────────┘
```

##### 6.3 성능 메트릭
```
┌─ 처리 성능 ─────────────────────────────┐
│ ⚡ 전사 속도: 2.3분/시간 (음성 기준)     │
│ 📊 API 응답: 평균 1.2초                 │
│ 🎯 정확도: 96.7% (최근 10개 작업)       │
│ ⏱️  대기열: 0개 작업                    │
└─────────────────────────────────────────┘
```

##### 6.4 실시간 로그 스트림
```
┌─ 시스템 로그 ───────────────────────────┐
│ [14:45:23] INFO: 작업 #156 시작          │
│ [14:45:24] DEBUG: 오디오 다운로드 완료   │
│ [14:45:25] INFO: API 호출 성공           │
│ [14:45:26] DEBUG: 청크 1/4 처리 완료     │
│ [14:45:27] WARN: 일시적 네트워크 지연    │
│ [14:45:28] INFO: 재시도 성공             │
└─────────────────────────────────────────┘
```

#### 알림 및 경고
- **리소스 부족**: CPU/메모리 사용량 85% 초과시 경고
- **API 한도**: API 사용량 한계 접근시 알림
- **작업 실패**: 연속 실패시 자동 알림
- **디스크 공간**: 저장 공간 부족시 경고

## 키보드 단축키 가이드

### 전역 단축키
| 키 | 기능 | 설명 |
|----|------|------|
| `Ctrl+C` | 종료 | 애플리케이션 전체 종료 |
| `Ctrl+Q` | 종료 | 애플리케이션 전체 종료 |
| `F1` | 도움말 | 현재 화면 도움말 표시 |
| `F2` | 테마 변경 | 다크/라이트 테마 토글 |
| `F5` | 새로고침 | 현재 화면 데이터 새로고침 |
| `Esc` | 뒤로가기 | 이전 화면으로 돌아가기 |

### 탐색 단축키
| 키 | 기능 | 설명 |
|----|------|------|
| `Tab` | 다음 요소 | 포커스를 다음 UI 요소로 이동 |
| `Shift+Tab` | 이전 요소 | 포커스를 이전 UI 요소로 이동 |
| `Enter` | 선택/실행 | 버튼 클릭 또는 항목 선택 |
| `Space` | 토글 | 체크박스/라디오 버튼 토글 |
| `↑↓←→` | 방향키 | 테이블/리스트 탐색 |

### 화면별 단축키

#### 메인 메뉴
| 키 | 기능 |
|----|------|
| `1` | 새 전사 작업 |
| `2` | 데이터베이스 관리 |
| `3` | API 키 관리 |
| `4` | 설정 |
| `5` | 실시간 모니터링 |
| `Q` | 종료 |

#### 전사 작업 화면
| 키 | 기능 |
|----|------|
| `Ctrl+Enter` | 전사 시작 |
| `Ctrl+S` | 설정 저장 |
| `F9` | 진행률 상세보기 토글 |
| `F10` | 로그 화면 토글 |

#### 데이터베이스 화면
| 키 | 기능 |
|----|------|
| `Ctrl+F` | 검색 창 포커스 |
| `Delete` | 선택된 항목 삭제 |
| `F3` | 다음 검색 결과 |
| `Shift+F3` | 이전 검색 결과 |
| `Ctrl+E` | CSV 내보내기 |

#### API 키 관리
| 키 | 기능 |
|----|------|
| `Insert` | 새 키 추가 |
| `F2` | 키 편집 |
| `Delete` | 키 삭제 |
| `F4` | 키 검증 |

## 접근성 기능

### 시각 접근성
- **고대비 모드**: 시각 장애인을 위한 고대비 테마
- **글자 크기**: 확대/축소 지원 (Ctrl +/-)
- **색상 구분**: 색맹을 고려한 아이콘 및 상태 표시

### 키보드 접근성
- **완전한 키보드 탐색**: 마우스 없이 모든 기능 접근 가능
- **포커스 표시**: 명확한 포커스 하이라이트
- **탭 순서**: 논리적인 탭 이동 순서

### 스크린 리더 지원
- **레이블링**: 모든 UI 요소에 의미있는 레이블
- **상태 알림**: 진행 상황 및 상태 변경 음성 안내
- **구조화**: 제목과 영역으로 구조화된 콘텐츠

## 성능 고려사항

### 대용량 데이터 처리
- **가상화**: 1000개 이상 항목에서 가상 스크롤링
- **페이지네이션**: 100개 단위 페이지 로딩
- **지연 로딩**: 필요시에만 데이터 로드

### 메모리 최적화
- **캐시 관리**: LRU 캐시로 메모리 사용량 제한
- **백그라운드 정리**: 미사용 리소스 자동 해제
- **스트리밍**: 대용량 로그 스트리밍 처리

### 응답성
- **비동기 처리**: UI 블로킹 없는 백그라운드 작업
- **프로그레시브 로딩**: 단계적 데이터 로딩
- **캔슬레이션**: 장시간 작업 중단 지원

## 오류 처리 및 복구

### 사용자 친화적 오류 메시지
- **구체적 설명**: 오류 원인과 해결 방법 제시
- **액션 제안**: 다음 단계 가이드
- **컨텍스트 정보**: 오류 발생 상황 설명

### 자동 복구 기능
- **재시도 로직**: 일시적 오류에 대한 자동 재시도
- **백업 엔진**: 주 엔진 실패시 대체 엔진 사용
- **상태 복원**: 중단된 작업 재개 기능

### 로깅 및 디버깅
- **다단계 로깅**: DEBUG/INFO/WARN/ERROR 레벨
- **상세 추적**: 작업 진행 단계별 로그
- **성능 모니터링**: 병목 지점 식별

이 TUI는 명령줄의 강력함과 GUI의 직관성을 결합하여, 전문가와 초보자 모두에게 친숙한 YouTube 전사 환경을 제공합니다.