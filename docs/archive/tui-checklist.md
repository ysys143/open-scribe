# TUI 구현 체크리스트

## 사전 준비 체크리스트

### 환경 설정
- [x] 가상환경 활성화 (`source .venv/bin/activate`)
- [x] Python 경로 확인 (`which python`)
- [x] 필요한 패키지 설치 (`uv pip install textual rich prompt-toolkit`)
- [ ] 개발 도구 설치 (`uv pip install textual-dev`)
- [x] requirements.txt 업데이트

### 디렉토리 구조
- [x] `src/tui/` 디렉토리 생성
- [x] `src/tui/screens/` 디렉토리 생성
- [x] `src/tui/widgets/` 디렉토리 생성
- [x] `src/tui/utils/` 디렉토리 생성
- [x] `src/tui/themes/` 디렉토리 생성
- [x] 모든 `__init__.py` 파일 생성

---

## Phase 1: 기본 프레임워크 체크리스트

### Step 1.1: 프로젝트 구조 설정
- [x] `src/tui/__init__.py` 생성 및 설정
- [x] 패키지 import 테스트 성공
- [x] 기본 테마 파일 생성 (`dark.tcss`, `light.tcss`)

### Step 1.2: Textual 앱 초기화
- [x] `src/tui/app.py` 메인 애플리케이션 클래스 생성
- [x] 기본 바인딩 설정 (Ctrl+C, F1, F2, Ctrl+R)
- [x] Header/Footer 구성
- [x] 애플리케이션 실행 테스트 (`python -m src.tui.app`)

### Step 1.3: 기본 화면 클래스
- [x] `src/tui/screens/base.py` BaseScreen 클래스 생성
- [x] 공통 키 이벤트 처리 (ESC, F5)
- [x] 에러/성공 메시지 표시 메서드
- [x] `src/tui/screens/__init__.py` 업데이트

### Step 1.4: 메인 메뉴 구현
- [x] `src/tui/screens/main_menu.py` 생성
- [x] 메뉴 버튼 7개 생성 (전사, DB, API키, 설정, 모니터링, 도움말, 종료)
- [x] 버튼 클릭 이벤트 처리
- [x] 도움말 기능 구현
- [x] 종료 기능 구현

### Step 1.5: 기본 CSS 테마
- [x] 다크 테마 스타일 생성 (인라인 CSS)
- [x] 메인 메뉴 스타일링
- [x] 버튼 hover 효과
- [x] 색상 스킴 적용
- [x] CSS 적용 확인

### Step 1.6: 메인 진입점
- [x] 프로젝트 루트에 `tui.py` 생성
- [x] 실행 권한 설정 (`chmod +x tui.py`)
- [x] 직접 실행 테스트 (`python tui.py`)
- [x] 모듈 실행 테스트 (`python -m src.tui.app`)

### Phase 1 최종 검증
- [x] TUI 애플리케이션 정상 실행
- [x] 모든 메뉴 버튼 클릭 동작 확인
- [x] 키보드 단축키 동작 확인 (Ctrl+C, F1, F2, ESC)
- [x] 테마 토글 기능 동작
- [x] 도움말 표시 기능
- [x] "Phase X에서 구현" 메시지 출력 확인

## ✅ Phase 1 완료 상태 (2025-09-03)

**성공적으로 구현된 기능:**
- YouTubeTranscriberTUI 기본 프레임워크
- 7개 메뉴 버튼이 있는 메인 화면
- 키보드 단축키 (Ctrl+C, F1, F2, Ctrl+R)
- 인라인 CSS 다크 테마
- `python tui.py` 실행 가능

**실제 구현 변경사항:**
- CSS: 외부 파일 → 인라인 CSS (경로 문제 해결)
- 메뉴 클래스: BaseScreen → Widget 상속
- 앱명: OpenScribeTUI → YouTubeTranscriberTUI

---

## Phase 2: 핵심 기능 체크리스트

### Step 2.1: 유틸리티 클래스 구현

#### ConfigManager
- [ ] `src/tui/utils/config_manager.py` 생성
- [ ] ConfigManager 클래스 구현
- [ ] `get_api_keys()` 메서드 구현
- [ ] `save_api_key()` 메서드 구현
- [ ] `update_env_file()` 메서드 구현
- [ ] JSON 설정 파일 읽기/쓰기 기능
- [ ] .env 파일 업데이트 기능

#### DatabaseManager
- [ ] `src/tui/utils/db_manager.py` 생성
- [ ] DatabaseManager 클래스 구현
- [ ] `get_jobs_filtered()` 메서드 스텁 생성
- [ ] `get_statistics()` 메서드 스텁 생성
- [ ] `export_to_csv()` 메서드 스텁 생성
- [ ] `cleanup_old_jobs()` 메서드 스텁 생성

### Step 2.2: API 키 관리 화면

#### 기본 구조
- [ ] `src/tui/screens/api_keys.py` 생성
- [ ] ApiKeysScreen 클래스 구현
- [ ] BaseScreen 상속 확인
- [ ] ConfigManager 인스턴스 생성

#### UI 구성
- [ ] 화면 제목 표시
- [ ] 액션 바 (추가/수정/삭제/검증 버튼) 구현
- [ ] DataTable을 사용한 키 목록 표시
- [ ] 키 입력 폼 (이름, 값) 구현
- [ ] 폼 저장/취소 버튼

#### 기능 구현
- [ ] `load_keys()` 메서드 - 키 목록 로드
- [ ] `mask_api_key()` 메서드 - 키 마스킹 (sk-...abc 형태)
- [ ] 키 추가 폼 표시 기능
- [ ] 키 저장 기능 (`save_key()` 메서드)
- [ ] 폼 취소 기능
- [ ] 폼 필드 초기화 기능
- [ ] 키 목록 새로고침 기능

#### 연동 및 검증
- [ ] 메인 메뉴에서 API 키 화면 연결
- [ ] .env 파일 읽기/쓰기 동작 확인
- [ ] JSON 설정 파일 생성/업데이트 확인
- [ ] 키 마스킹 표시 확인
- [ ] 에러 처리 및 메시지 표시

### Step 2.3: 데이터베이스 관리 화면

#### 기본 구조
- [ ] `src/tui/screens/database.py` 생성
- [ ] DatabaseScreen 클래스 구현
- [ ] DatabaseManager 인스턴스 생성
- [ ] 필터/검색 상태 변수 초기화

#### UI 구성
- [ ] 화면 제목 표시
- [ ] TabbedContent 구조 (히스토리/통계 탭)
- [ ] 검색 바 (입력창, 검색/새로고침/내보내기 버튼)
- [ ] 필터 바 (전체/성공/실패/진행중 버튼)
- [ ] DataTable을 사용한 히스토리 표시
- [ ] 통계 탭 placeholder

#### 기능 구현
- [ ] `load_history()` 메서드 - 히스토리 데이터 로드
- [ ] 테스트 데이터로 테이블 채우기
- [ ] 검색 기능 (`search_jobs()` 메서드)
- [ ] 필터링 기능 (`filter_jobs()` 메서드)
- [ ] 필터 버튼 활성화 상태 관리
- [ ] 데이터 새로고침 기능
- [ ] 내보내기 기능 placeholder

#### 연동 및 검증
- [ ] 메인 메뉴에서 데이터베이스 화면 연결
- [ ] 테이블 컬럼 표시 확인 (ID, 제목, URL, 엔진, 상태, 날짜, 크기)
- [ ] 검색어 입력 및 검색 동작
- [ ] 필터 버튼 클릭 및 상태 변경 확인
- [ ] 탭 전환 동작 확인

### Step 2.4: 설정 관리 화면

#### 기본 구조
- [ ] `src/tui/screens/settings.py` 생성
- [ ] SettingsScreen 클래스 구현
- [ ] ConfigManager 연동

#### UI 구성
- [ ] 화면 제목 표시
- [ ] 설정 카테고리 구분 (기본 설정, 경로 설정, 성능 설정, UI 설정)
- [ ] 각 설정별 입력 컨트롤
- [ ] 저장/취소/초기화 버튼

#### 기능 구현
- [ ] 현재 설정값 로드
- [ ] 설정값 저장 기능
- [ ] 설정 유효성 검증
- [ ] 기본값 복원 기능

#### 연동 및 검증
- [ ] 메인 메뉴에서 설정 화면 연결
- [ ] 설정값 저장/로드 동작 확인
- [ ] .env 파일 업데이트 확인

### Phase 2 최종 검증
- [ ] API 키 관리: 키 추가/조회/마스킹 동작
- [ ] 데이터베이스 관리: 히스토리 조회/검색/필터링 동작
- [ ] 설정 관리: 설정값 편집/저장 동작
- [ ] 모든 화면 간 네비게이션 정상 동작
- [ ] ESC 키로 메인 메뉴 복귀
- [ ] F5 키로 데이터 새로고침

---

## Phase 3: 전사 통합 체크리스트

### Step 3.1: 전사 작업 화면 UI

#### 기본 구조
- [ ] `src/tui/screens/transcribe.py` 생성
- [ ] TranscribeScreen 클래스 구현
- [ ] 필요한 위젯 import

#### UI 구성
- [ ] 화면 제목 표시
- [ ] URL 입력 섹션 구현
- [ ] 전사 엔진 선택 (RadioSet) 구현
- [ ] 옵션 체크박스들 구현 (요약, 번역, SRT, 비디오, 오디오, 타임스탬프, 스트리밍)
- [ ] 실행 버튼들 (시작, 중지, 재시작) 구현
- [ ] 진행률 표시 위젯 영역
- [ ] 로그 출력 영역 (Log 위젯)

#### 폼 기능
- [ ] URL 유효성 검증 기능
- [ ] 엔진 선택 상태 관리
- [ ] 체크박스 상태 수집 기능
- [ ] 설정 수집 (`collect_transcription_config()` 메서드)

#### 연동 및 검증
- [ ] 메인 메뉴에서 전사 화면 연결
- [ ] 모든 UI 요소 렌더링 확인
- [ ] 폼 입력 및 상태 변경 동작

### Step 3.2: CLI 모듈 통합

#### 비동기 작업 설정
- [ ] `@work` 데코레이터 사용한 백그라운드 작업
- [ ] `run_transcription()` 비동기 메서드 구현
- [ ] 기존 CLI 로직 import 및 연동

#### 진행률 콜백
- [ ] `update_progress()` 콜백 메서드 구현
- [ ] `log_message()` 콜백 메서드 구현
- [ ] CLI 모듈에서 콜백 호출 연동

#### UI 상태 관리
- [ ] `toggle_transcription_ui()` 메서드 구현
- [ ] 실행 중 UI 비활성화/활성화
- [ ] 중지/재시작 버튼 상태 관리

### Step 3.3: 실시간 진행률 표시

#### 진행률 위젯
- [ ] `src/tui/widgets/progress.py` 생성
- [ ] TranscriptionProgressWidget 클래스 구현
- [ ] 진행률 바 및 텍스트 표시
- [ ] ETA 및 속도 표시

#### 진행률 업데이트
- [ ] 다운로드 진행률 표시
- [ ] 전사 진행률 표시
- [ ] 후처리 진행률 표시
- [ ] 실시간 업데이트 동작 확인

### Step 3.4: 로그 스트리밍

#### 로그 위젯 설정
- [ ] Log 위젯 설정 및 스타일링
- [ ] 실시간 로그 메시지 출력
- [ ] 색상 구분 (INFO, WARN, ERROR)

#### 로그 기능
- [ ] 자동 스크롤 기능
- [ ] 로그 레벨 필터링
- [ ] 로그 저장 기능

### Phase 3 최종 검증
- [ ] 전사 작업 화면 완전한 UI 렌더링
- [ ] URL 입력 및 검증 동작
- [ ] 엔진 선택 및 옵션 설정 동작
- [ ] 전사 시작 버튼 클릭 시 백그라운드 작업 시작
- [ ] 실시간 진행률 업데이트
- [ ] 로그 스트리밍 출력
- [ ] 작업 완료 시 성공/실패 메시지
- [ ] UI 상태 복원 (버튼 활성화)

---

## Phase 4: 고급 기능 체크리스트

### Step 4.1: 실시간 모니터링

#### 모니터링 화면
- [ ] `src/tui/screens/monitor.py` 생성
- [ ] MonitorScreen 클래스 구현
- [ ] 시스템 리소스 모니터링 위젯

#### 기능 구현
- [ ] 현재 작업 상태 표시
- [ ] CPU/메모리 사용률 표시
- [ ] 네트워크 속도 표시
- [ ] 실시간 로그 스트림

#### 연동 및 검증
- [ ] 메인 메뉴에서 모니터링 화면 연결
- [ ] 실시간 데이터 업데이트 동작
- [ ] 시스템 리소스 정확한 표시

### Step 4.2: 통계 대시보드

#### 통계 위젯
- [ ] `src/tui/widgets/charts.py` 생성
- [ ] StatisticsWidget 클래스 구현
- [ ] 차트 및 그래프 표시

#### 통계 데이터
- [ ] 전체 작업 통계 계산
- [ ] 엔진별 사용 현황
- [ ] 성공률 및 처리 시간 분석
- [ ] 시간대별 작업 빈도

#### 연동 및 검증
- [ ] 데이터베이스 화면 통계 탭에 연동
- [ ] 실제 데이터 기반 통계 표시
- [ ] 차트 렌더링 및 업데이트

### Step 4.3: 테마 시스템 완성

#### 라이트 테마
- [ ] `src/tui/themes/light.tcss` 라이트 테마 구현
- [ ] 모든 UI 요소 라이트 테마 스타일
- [ ] 가독성 및 접근성 고려

#### 테마 전환
- [ ] F2 키 테마 토글 기능 완성
- [ ] 테마 상태 저장/로드
- [ ] 부드러운 테마 전환 효과

### Step 4.4: 최적화 및 폴리싱

#### 성능 최적화
- [ ] 대용량 테이블 가상화
- [ ] 메모리 사용량 최적화
- [ ] 응답성 개선

#### 사용자 경험
- [ ] 키보드 네비게이션 완성
- [ ] 접근성 개선
- [ ] 에러 처리 개선

### Phase 4 최종 검증
- [ ] 실시간 모니터링 화면 정상 동작
- [ ] 통계 대시보드 데이터 표시
- [ ] 라이트/다크 테마 전환 동작
- [ ] 전체 애플리케이션 성능 최적화
- [ ] 모든 키보드 단축키 동작

---

## 품질 보증 체크리스트

### 코드 품질
- [ ] 모든 클래스에 docstring 추가
- [ ] 타입 힌트 추가
- [ ] 일관된 코딩 스타일
- [ ] 에러 처리 완성

### 테스트
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 실행
- [ ] UI 테스트 확인
- [ ] 성능 테스트 실행

### 문서화
- [ ] README 업데이트
- [ ] API 문서 생성
- [ ] 사용자 가이드 작성
- [ ] 설치 가이드 확인

### 배포 준비
- [ ] requirements.txt 최신화
- [ ] 실행 스크립트 테스트
- [ ] 다양한 환경에서 테스트
- [ ] 버전 정보 업데이트

---

## 선택적 개선사항 체크리스트

### 고급 기능
- [ ] 플러그인 시스템 구현
- [ ] 다국어 지원
- [ ] 설정 프로필 시스템
- [ ] 자동 업데이트 기능

### 사용성 개선
- [ ] 드래그 앤 드롭 지원
- [ ] 컨텍스트 메뉴
- [ ] 툴팁 시스템
- [ ] 키보드 단축키 커스터마이징

### 통합 기능
- [ ] CLI와 TUI 통합 실행
- [ ] 설정 공유
- [ ] 로그 통합 관리
- [ ] 작업 큐 시스템

이 체크리스트를 단계별로 진행하면서 각 항목을 체크해나가시면 됩니다!